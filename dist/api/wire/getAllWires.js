var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.getAllWires=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _axios=_interopRequireDefault(require("axios"));var _calculateTimeAgo=_interopRequireDefault(require("../../utils/calculateTimeAgo"));var cloudFrontDomain="https://dpz1evfcdl4g3.cloudfront.net";var getAllWires=exports.getAllWires=function(){var _ref2=(0,_asyncToGenerator2.default)(function*(_ref){var WIRE_API_URL=_ref.WIRE_API_URL,CHANNEL_API_URL=_ref.CHANNEL_API_URL;var _yield$Promise$all=yield Promise.all([_axios.default.get(`${WIRE_API_URL}/api/v1/wires/route-wires/`),_axios.default.get(`${CHANNEL_API_URL}/api/v1/channels/channel-routes/`)]),_yield$Promise$all2=(0,_slicedToArray2.default)(_yield$Promise$all,2),wiresRes=_yield$Promise$all2[0],channelsRes=_yield$Promise$all2[1];var channels=channelsRes.data.data;var channelLogoMap=new Map(channels.map(function(channel){return[channel._id,channel.channelLogo?`${cloudFrontDomain}/${channel.channelLogo}`:null];}));console.log(`GET ALL WIRES FROM API PACKAGE: `,wires);var wires=wiresRes.data.data.map(function(wire){return Object.assign({},wire,{timeAgo:(0,_calculateTimeAgo.default)(wire.time)});});console.log(`WIRES FROM API PACKAGE`,wires);return{wires:wires,channelLogos:Object.fromEntries(channelLogoMap)};});return function getAllWires(_x){return _ref2.apply(this,arguments);};}();
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.getChannel=void 0;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _axios=_interopRequireDefault(require("axios"));var getChannel=exports.getChannel=function(){var _ref=(0,_asyncToGenerator2.default)(function*(channelId,CHANNEL_API_URL,VIDEO_API_URL){try{var _yield$axios$get=yield _axios.default.get(`${CHANNEL_API_URL}/api/v1/channels/channel-routes/${channelId}`),channelData=_yield$axios$get.data;var extractedData=channelData.data;console.log(`Extracted Data: `,extractedData);var videoIds=extractedData.videos;console.log(`Video IDs: `,videoIds);var queryParam=videoIds.join(",");var _yield$axios$get2=yield _axios.default.get(`${VIDEO_API_URL}/api/v1/videos/route-video/`,{params:{ids:queryParam}}),videoData=_yield$axios$get2.data;console.log(`Video Data: `,videoData);var allVideos=videoData.data;console.log(`Extracted Data: `,extractedData);console.log(`Video Data after extraction: `,videoData.data);if(extractedData.channelLogo){extractedData.channelLogo=`${cloudFrontDomain}/${extractedData.channelLogo}`;}if(extractedData.bannerImage){extractedData.bannerImage=`${cloudFrontDomain}/${extractedData.bannerImage}`;}var videos=extractedData.videos;var latestVideo=allVideos.length>0?allVideos[0]:null;var wiresData=extractedData.wires;var LatestVidThumbKey=(latestVideo==null?void 0:latestVideo.thumbnail)||null;allVideos.forEach(function(video){if(video.thumbnail&&video.thumbnail.includes("default-thumbnail.jpeg")){video.thumbnailUrl=`${cloudFrontDomain}/default-thumbnail.png`;}else{video.thumbnailUrl=`${cloudFrontDomain}/${video.thumbnail}`;}});if(latestVideo){latestVideo.thumbnailUrl=LatestVidThumbKey&&(LatestVidThumbKey.includes("default-thumbnail.jpeg")||LatestVidThumbKey.includes("default-thumbnail.png"))?`https://begenone-images.s3.us-east-1.amazonaws.com/default-thumbnail.png`:`${cloudFrontDomain}/${latestVideo.thumbnail}`||null;}return{channel:extractedData,latestVideo:latestVideo,channelLogo:extractedData.channelLogo,bannerImage:extractedData.bannerImage,videos:videos,LatestVideoThumbnail:latestVideo?latestVideo.thumbnailUrl:null,wiresData:wiresData};}catch(error){console.error("Error fetching channel data:",error);throw error;}});return function getChannel(_x,_x2,_x3){return _ref.apply(this,arguments);};}();
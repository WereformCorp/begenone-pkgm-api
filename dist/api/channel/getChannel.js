var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.getChannel=void 0;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _axios=_interopRequireDefault(require("axios"));var getChannel=exports.getChannel=function(){var _ref2=(0,_asyncToGenerator2.default)(function*(_ref){var channelId=_ref.channelId,CHANNEL_API_URL=_ref.CHANNEL_API_URL,VIDEO_API_URL=_ref.VIDEO_API_URL,CLOUDFRONT_URL=_ref.CLOUDFRONT_URL,GET_CHANNEL_ENDPOINT=_ref.GET_CHANNEL_ENDPOINT;try{var _yield$axios$get=yield _axios.default.get(`${CHANNEL_API_URL}${GET_CHANNEL_ENDPOINT}${channelId}`),channelData=_yield$axios$get.data;var extractedData=channelData.data;console.log("Get Channel | Extracted Data:",extractedData);var videoIds=extractedData.videos;console.log("Channel Video IDs:",videoIds);var queryParam=videoIds.join(",");var _yield$axios$get2=yield _axios.default.get(`${VIDEO_API_URL}/api/v1/videos/route-video/`,{params:{ids:queryParam}}),videoData=_yield$axios$get2.data;console.log("Video Data:",videoData);var allVideos=videoData.data;if(extractedData.channelLogo){extractedData.channelLogo=`${CLOUDFRONT_URL}/${extractedData.channelLogo}`;}if(extractedData.bannerImage){extractedData.bannerImage=`${CLOUDFRONT_URL}/${extractedData.bannerImage}`;}var videos=extractedData.videos;var latestVideo=allVideos.length>0?allVideos[0]:null;var wiresData=extractedData.wires;var LatestVidThumbKey=(latestVideo==null?void 0:latestVideo.thumbnail)||null;allVideos.forEach(function(video){if(video.thumbnail&&video.thumbnail.includes("default-thumbnail.jpeg")){video.thumbnailUrl=`${CLOUDFRONT_URL}/default-thumbnail.png`;}else{video.thumbnailUrl=`${CLOUDFRONT_URL}/${video.thumbnail}`;}});if(latestVideo){latestVideo.thumbnailUrl=LatestVidThumbKey&&(LatestVidThumbKey.includes("default-thumbnail.jpeg")||LatestVidThumbKey.includes("default-thumbnail.png"))?`https://begenone-images.s3.us-east-1.amazonaws.com/default-thumbnail.png`:`${CLOUDFRONT_URL}/${latestVideo.thumbnail}`||null;}return{channel:extractedData,latestVideo:latestVideo,channelLogo:extractedData.channelLogo,bannerImage:extractedData.bannerImage,videos:videos,LatestVideoThumbnail:latestVideo?latestVideo.thumbnailUrl:null,wiresData:wiresData};}catch(error){var _error$response;console.error("GET CHANNEL Error:",(error==null?void 0:(_error$response=error.response)==null?void 0:_error$response.data)||(error==null?void 0:error.message)||error);throw error;}});return function getChannel(_x){return _ref2.apply(this,arguments);};}();
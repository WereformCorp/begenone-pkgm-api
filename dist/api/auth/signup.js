var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.signup=void 0;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _axios=_interopRequireDefault(require("axios"));var signup=exports.signup=function(){var _ref2=(0,_asyncToGenerator2.default)(function*(_ref){var firstName=_ref.firstName,secondName=_ref.secondName,email=_ref.email,password=_ref.password,passwordConfirm=_ref.passwordConfirm,username=_ref.username,USER_API_URL=_ref.USER_API_URL,USER_CHECK_EXISTENCE_ENDPOINT=_ref.USER_CHECK_EXISTENCE_ENDPOINT,CREATE_USER_ENDPOINT=_ref.CREATE_USER_ENDPOINT;console.log("Signup First Name:",firstName);console.log("Signup Second Name:",secondName);console.log("Signup Email:",email);console.log("Signup Password:",password);console.log("Signup Password Confirm:",passwordConfirm);console.log("Signup Username:",username);try{if(password!==passwordConfirm){throw new Error("Passwords do not match");}var existenceCheckRes=yield _axios.default.post(`${USER_API_URL}${USER_CHECK_EXISTENCE_ENDPOINT}`,{username:username,email:email});var message=existenceCheckRes.data.message;if(message==="username-exist"){throw new Error("Username already exists");}if(message==="email-exist"){throw new Error("Email already exists");}var payload={name:{firstName:firstName,secondName:secondName},username:username,eAddress:{email:email,password:password,passwordConfirm:passwordConfirm,passwordChangedAt:Date.now()}};var response=yield _axios.default.post(`${USER_API_URL}/${CREATE_USER_ENDPOINT}`,payload);return response.data;}catch(error){var _error$response;console.error("Signup Error:",(error==null?void 0:(_error$response=error.response)==null?void 0:_error$response.data)||(error==null?void 0:error.message)||error);throw error;}});return function signup(_x){return _ref2.apply(this,arguments);};}();